/*
 * d=2
 * n=341
 * m=256
 * c=1.33
 * maxlen=2
 * minklen=1
 * maxklen=22
 * minchar=45
 * maxchar=121
 * loop=0
 * numiter=380276
 * seed=0
 */

static int g[] = {
	-1, 172, 117, 175, 192, 178, -1, 151, 177, 67,
	182, 57, 0, 123, 10, 43, 131, -1, 182, 134,
	168, -1, 14, 0, 194, 121, 56, 198, -1, 37,
	-1, 236, 211, 20, -1, 75, -1, 39, 107, 238,
	213, 128, 196, 108, 197, 0, 61, 125, 55, -1,
	3, 12, 120, 207, 0, 17, 0, 84, 43, 0,
	210, 0, 26, 145, -1, 144, 98, 134, 146, 88,
	-1, -1, 177, 164, 124, 249, 174, 88, 0, -1,
	133, 239, -1, 161, 228, 3, -1, -1, 75, 1,
	-1, 131, -1, 107, 147, 7, 42, -1, 59, 250,
	0, 184, 160, -1, 55, 69, 12, 0, -1, 62,
	0, 5, 147, 245, 251, 169, -1, 238, -1, -1,
	126, 170, 229, 115, -1, 65, 178, 43, 147, 217,
	33, -1, 50, 234, -1, -1, 207, -1, 196, -1,
	160, 168, 29, -1, 172, -1, -1, 247, 186, -1,
	252, 247, 100, 96, 210, -1, -1, 185, 4, -1,
	15, 150, 84, 51, 126, 170, 169, 237, 237, 12,
	190, 236, 107, 64, 0, 6, 30, 0, 0, -1,
	29, 129, 0, 227, 150, 65, 0, 89, 39, 189,
	33, 232, -1, 107, -1, 120, 102, 250, 46, 22,
	195, 205, 59, -1, 68, 0, 148, 117, 184, 182,
	82, -1, 52, 248, -1, 45, 7, 204, 38, 91,
	159, 55, 109, 51, 0, 15, 185, 136, 166, 135,
	161, 18, 189, 251, 136, 0, 91, 135, 226, 226,
	191, -1, 84, 123, 220, 23, 151, 117, 235, 0,
	184, 0, 49, 245, 195, 123, -1, 49, 16, 186,
	157, 235, 42, 20, 14, 242, 0, 254, 43, 0,
	220, 0, -1, 250, 164, 132, -1, 86, 104, 129,
	147, 139, 25, 0, 0, 85, 60, 75, 42, 206,
	-1, -1, 151, 162, 59, 124, 107, 97, 0, 231,
	0, 102, 255, 74, 0, -1, 66, 0, 76, 232,
	203, 39, 227, -1, 148, 144, -1, 189, 51, 232,
	132, 172, 151, -1, 93, 83, -1, 87, 53, 0,
	62, -1, 124, 120, 241, 133, 182, 161, 28, 54,
	194, 
};

static int T0[] = {
	315, 200, 14, 246, 33, 163, 224, 149, 0, 103,
	193, 310, 40, 16, 159, 276, 331, 128, 66, 122,
	202, 208, 52, 158, 291, 121, 104, 229, 230, 290,
	253, 202, 147, 267, 108, 181, 87, 330, 330, 88,
	92, 180, 55, 133, 195, 214, 66, 185, 340, 132,
	307, 200, 340, 18, 17, 288, 137, 119, 176, 25,
	68, 86, 225, 215, 10, 331, 55, 98, 320, 42,
	184, 72, 221, 239, 203, 75, 110, 198, 204, 171,
	154, 196, 324, 38, 237, 208, 292, 271, 154, 68,
	274, 81, 213, 127, 6, 232, 18, 279, 199, 79,
	52, 316, 301, 122, 213, 135, 227, 109, 331, 91,
	280, 144, 285, 261, 180, 181, 127, 132, 110, 281,
	200, 43, 22, 70, 171, 28, 300, 187, 305, 159,
	265, 16, 134, 225, 136, 5, 19, 23, 114, 7,
	112, 51, 150, 56, 310, 330, 236, 96, 119, 5,
	37, 318, 48, 57, 
};

static int T1[] = {
	130, 289, 8, 286, 114, 259, 273, 146, 220, 242,
	327, 23, 291, 193, 335, 262, 192, 102, 62, 231,
	314, 229, 15, 177, 78, 167, 121, 340, 45, 96,
	300, 174, 42, 308, 119, 156, 225, 49, 302, 104,
	292, 288, 125, 242, 139, 120, 161, 331, 220, 223,
	221, 193, 109, 236, 27, 186, 60, 148, 185, 105,
	244, 144, 279, 284, 112, 55, 99, 335, 105, 58,
	98, 54, 4, 221, 296, 143, 0, 340, 61, 15,
	292, 163, 241, 268, 97, 88, 60, 79, 99, 312,
	267, 128, 201, 68, 88, 123, 318, 51, 93, 258,
	28, 282, 41, 151, 28, 189, 310, 179, 186, 29,
	193, 137, 192, 93, 65, 290, 179, 123, 26, 278,
	92, 293, 65, 293, 18, 152, 75, 337, 203, 169,
	252, 230, 108, 293, 40, 136, 139, 8, 313, 326,
	37, 165, 122, 227, 256, 187, 174, 94, 309, 200,
	29, 60, 150, 95, 
};

#ifndef perfhash_tolower
#define perfhash_tolower(c) tolower(c)
#endif

static int perfhash(const unsigned char *key, int len)
{
	int i;
	int n;
	unsigned f0, f1;
	const unsigned char *kp = key;

	if (len < 1 || len > 22)
		return -1;

	for (i=-45, f0=f1=0, n=0; n<len; ++n) {
		int c = kp[n];
		c = perfhash_tolower(c);
		if (c < 45 || c > 121)
			return -1;
		f0 += T0[i + c];
		f1 += T1[i + c];
		i += 77;
		if (i >= 109)
			i = -45;
	}

	f0 %= 341;
	f1 %= 341;

	return (g[f0] + g[f1]) % 256;
}
